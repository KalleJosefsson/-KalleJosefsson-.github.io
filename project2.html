<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project 1: Fun with filters</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
            color: #333;
        }
        header {
            text-align: center;
            margin-bottom: 50px;
        }
        h1 {
            font-size: 2.5em;
            color: #4CAF50;
        }
        h2 {
            color: #4CAF50;
        }
        p {
            font-size: 1.2em;
            line-height: 1.6em;
        }
        img {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            margin: 20px 0;
        }
        section {
            margin-bottom: 40px;
        }
        footer {
            text-align: center;
            margin-top: 50px;
            font-size: 0.8em;
            color: #777;
        }
        .screenshot {
            display: flex;
            justify-content: center;
        }
    </style>
</head>
<body>
    <header>
        <h1> Filters and Frequencies</h1>
    </header>

    <!-- Introduction Section -->
    <section>
        <h2>1.1 Finite difference operators</h2>
        <p>
            In the first part of the project the task was to find the partial derivative in x and y for an image using convolutions. In order to extract the image showing the partial derivative of the image
            in x, we convolute the one 2D image with it's corresponding finite differenece kernel Dx. Dx in this calculations is constructed as: np.array([[1, -1]]). In order to calculate
            the partial derivative of y, we do the same thing but letting the kernel which the image is convolved be: dy_kernel = np.array([[1], [-1]]). In order to not change the imagesize
            during convolution we let the mode be 'same' when using the scipy built in function convolve2D.
        </p>

        <p>
            In order to get an image showing the edges in a picture we just combine the two calculated partial derivatives.  The calculations is done by pixelwise taking 
            square root of the sum of the images squared, i.e np.sqrt(partial_x**2 + partial_y**2). After this operation, we can set a threshold for how sharp edges must be in order to be in the edgeimage.
            I found the when binarizing, letting the threshold be 0.3 was most suitable. The results are presented below.
        </p>

    </section>

<!-- TIF Image Before Processing Section -->
<section>
    <h2>TIF Images Before and After Processing</h2>
    
    <!-- First row of images -->
    <div class="screenshot" style="display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap;">
        <!-- First image: Camerman before processing -->
        <div style="flex: 1; padding: 10px; min-width: 48%;">
            <img src="./images2/cameraman.png" alt="Image before processing " style="max-width: 100%; border-radius: 8px;">
            <p>The image above shows the original image before processing.</p>
        </div>

        <!-- Second image: Original image for comparison -->
        <div style="flex: 1; padding: 10px; min-width: 48%;">
            <img src="./images2/edge_pic_camerman.jpeg" alt="Gradient Magnitude" style="max-width: 100%; border-radius: 8px;">
            <p>The image above is the edgeimage gotten from the combination of the partial derivatives in x and y.</p>
        </div>
    </div>
    
    <!-- Second row of images -->
    <div class="screenshot" style="display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap;">
        <!-- Third image: Aligned image -->
        <div style="flex: 1; padding: 10px; min-width: 48%;">
            <img src="./images2/partial_x_cameraman.jpeg" alt="Image after alignment" style="max-width: 100%; border-radius: 8px;">
            <p>The image above shows the partial derivative of the original image in x direction.</p>
        </div>

        <!-- Fourth image: Final image after enhancement -->
        <div style="flex: 1; padding: 10px; min-width: 48%;">
            <img src="./images2/partial_y_cameraman.jpeg" alt="Final processed image" style="max-width: 100%; border-radius: 8px;">
            <p>The image above shows the  partial derivative of the orginal iamage in y direction.</p>
        </div>
    </div>
</section>



    <!-- 1.2 Section -->
    <section>
        <h2> 1.2 Using gaussian blurring to improve edgeimages</h2>
        <p>
            For the first part of task 1.2 we do the same operations as we did in task 1.1. But before taking the partial derivative we first blurr the image using a gaussian kernel. For this image I choose to 
            use a kernelsize of 11 and a sigma of 1.5 which I convolved with the original image in order to blurr the picture. 
           
    </p>

      


       <section>
  <!-- Section for Displaying Images -->
<section>
    <h2>Gallery of Images for 1.2</h2>

    <!-- Flex Container for Images -->
    <div style="display: flex; flex-wrap: wrap; justify-content: space-between; align-items: flex-start;">

        <!-- Row 1 -->
        <div style="flex: 1 1 48%; padding: 10px;">
            <img src="./images2/dog_x.jpeg" alt="Image 1" style="width: 100%; border-radius: 8px;">
            <p>DoG Filter in X.</p>
        </div>
        <div style="flex: 1 1 48%; padding: 10px;">
            <img src="./images2/dog_y.jpeg" alt="Image 2" style="width: 100%; border-radius: 8px;">
            <p>DoG Filter in Y.</p>
        </div>

        <!-- Row 2 -->
        <div style="flex: 1 1 48%; padding: 10px;">
            <img src="./images2/blurred_partial_x.jpeg" alt="Image 3" style="width: 100%; border-radius: 8px;">
            <p> Convolving Image with Gaussian and the Finite difference kernel for x.</p>
        </div>
        <div style="flex: 1 1 48%; padding: 10px;">
            <img src="./images2/blurred_partial_x.jpeg" alt="Image 4" style="width: 100%; border-radius: 8px;">
            <p>Convolving Gaussian with Finite Difference and then with image for x</p>
        </div>

        <!-- Row 3 -->
        <div style="flex: 1 1 48%; padding: 10px;">
            <img src="./images2/blurred_partial_y.jpeg" alt="Image 5" style="width: 100%; border-radius: 8px;">
            <p>Convolving Image with Gaussian and the Finite difference kernel for y.</p>
        </div>
        <div style="flex: 1 1 48%; padding: 10px;">
            <img src="./images2/blurred_partial_y.jpeg" alt="Image 6" style="width: 100%; border-radius: 8px;">
            <p>Convolving Gaussian with Finite Difference and then with image for y .</p>
        </div>

        <!-- Row 4 -->
        <div style="flex: 1 1 48%; padding: 10px;">
            <img src="./images2/gaussian_edge_camerman.jpeg" alt="Image 7" style="width: 100%; border-radius: 8px;">
            <p>Edgeimage after blurring 7.</p>
        </div>
        <div style="flex: 1 1 48%; padding: 10px;">
            <img src="./images2/conv_gaussain_camerman.jpeg" alt="Image 8" style="width: 100%; border-radius: 8px;">
            <p>Edgeimage using DoG filters</p>
        </div>

    </div>
</section>

             <!-- 2.1 Section -->
    <section>
        <h2> 2.1 Image Sharpening</h2>
        <p>
            Now it is time to sharpen images instead of blurring them. However in order to sharpen the images we do in fact blurr them first. The process fo sharpening an image is quite simple
            First you create a gaussian with an appropriate size and sigma value, for this task I varied it based on the images spatial resolution. Then you blurr your image and subtract the blurred part form 
            the original image. Then you add the difference the desired amount of times, which we call the alpha factor, to the original image based on how much you want to sharpen it. I did 
           
    </p>

      
<div style="display: flex; justify-content: space-between; align-items: flex-start;">
        
        <!-- Image 1 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/taj.jpg" alt="Image 1" style="width: 100%; border-radius: 8px;">
            <p>Original image.</p>
        </div>

        <!-- Image 2 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/taj_alpha2.jpg" alt="Image 2" style="width: 100%; border-radius: 8px;">
            <p>Taj with alpha = 2.</p>
        </div>

        <!-- Image 3 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/taj_alpha4.jpg" alt="Image 3" style="width: 100%; border-radius: 8px;">
            <p>Taj with alpha = 4.</p>
        </div>

        <!-- Image 4 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/taj_alpha6.jpg" alt="Image 4" style="width: 100%; border-radius: 8px;">
            <p>Taj with alpha = 6.</p>
        </div>
    </div>


        <p>
            Now I took a high quality picture of me and my family and blurred it to the resharpen the image and see the results. 
        </p>

         <div style="display: flex; justify-content: space-between; align-items: flex-start;">
        
        <!-- Image 1 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/3gens.jpg" alt="Image 1" style="width: 100%; border-radius: 8px;">
            <p>Original Image.</p>
        </div>

        <!-- Image 2 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/3gens_blurr.jpg" alt="Image 2" style="width: 100%; border-radius: 8px;">
            <p>Gaussian Blurr.</p>
        </div>

        <!-- Image 3 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/3gens_blurr_alpha1.jpg" alt="Image 3" style="width: 100%; border-radius: 8px;">
            <p>Sharpened iamge with alpha = 1.</p>
        </div>

        <!-- Image 4 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/3gens_blurr_alpha3.jpg" alt="Image 4" style="width: 100%; border-radius: 8px;">
            <p>Sharpened iamge with alpha = 3.</p>
        </div>

        <!-- Image 5 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/3gens_blurr_alpha5.jpg" alt="Image 5" style="width: 100%; border-radius: 8px;">
            <p>Sharpened iamge with alpha = 5.</p>
        </div>
    </div>

        <p>
            As we can see in the above images, the original image is better looking than the sharpened ones after blurring. This is due to the fact that when we do the gaussian blurr
            we average from pixels and therefor loose informaton which the original image included, this information can not be regained again, unless of course we would use some sort of Machine Learning tool.
        </p>
       <section>

        
       
    <section>
        <h2>2.2 Hybrid Images</h2>
        <p>
            In this part we were supposed to create hybrid images which is seen as two different images when looked at far away or up close. If you do not want to walk away from the computer to see the 
            far away image you can just squint your eyes. The theory behind creating these images is take two images and add them together. But jsut doing that will give a really messy result. Instead
            we use our knowledge of frequencies to create these images. We take our 2 images and let one of them pass thorugh a highpass filter and the other one passs through a lowpass filter and then add them upp together.
            However instead of fourier transforming and then removing low and high frequencies of the images, we instead blurred the image which created the low frequency iamge. For the high
            frequency image we just subtracted its respective lowpass image to isolate the high frequencies from the image. Very simple, then by just adding them up we get our hybrid images. I did lttle extra twist here 
            and increased the weight of the high frequency image by some to really make it pop when looking at the image up close, I think gave more exciting results.
        </p>
<div style="display: flex; justify-content: space-between; align-items: flex-start;">
        <!-- Image 1 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/DerekPicture.jpg" alt="Image 1" style="width: 100%; border-radius: 8px;">
            <p>Derek: Low frequency Image.</p>
        </div>

        <!-- Image 2 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/nutmeg.jpg" alt="Image 2" style="width: 100%; border-radius: 8px;">
            <p>Nutmeg: High frequency Image.</p>
        </div>

        <!-- Image 3 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/catrek.jpg" alt="Image 3" style="width: 100%; border-radius: 8px;">
            <p>Catrek: Hybrid Image.</p>
        </div>

    </div>
    <div style="display: flex; justify-content: space-between; align-items: flex-start;">
        <!-- Image 1 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/rut1.jpg" alt="Image 1" style="width: 100%; border-radius: 8px;">
            <p>Rut: Low frequency Image.</p>
        </div>

        <!-- Image 2 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/kalle1.jpg" alt="Image 2" style="width: 100%; border-radius: 8px;">
            <p>Kalle: High frequency Image.</p>
        </div>

        <!-- Image 3 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/rutkalle_final.jpg" alt="Image 3" style="width: 100%; border-radius: 8px;">
            <p>Kallrut: Hybrid Image both colorized.</p>
        </div>

        <!-- Image 3 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/rutkalle_grayrgb.jpg" alt="Image 3" style="width: 100%; border-radius: 8px;">
            <p>Kallrut: Hybrid Image LF grayscale and HF RGB</p>
        </div>

    </div>



        <p>
            I tried different combinations for color settings when doing the hybrid images and came to the conclusion that gray and gray is not that great but works fine, 
            gray and color works as combination if you put the high frequency picture as colorized and the low frequency picture in grayscale otherwise the the contours in the high frequency image will
            not be as clear. However I liked having both images in color since it made the hybrid images more vivid and fun to look at.
        </p>

        <p>
            For my favorite merger, aka Kallrut I also did fourier analysis. For this I fouriertransformed the images and plotted the results in frequency domain. Below you will see the 
            fourier transfrom of me, rut, lowpass rut, highpass me and also the hybrid image after merging us.
        </p>

          </div>
    <div style="display: flex; justify-content: space-between; align-items: flex-start;">
        <!-- Image 1 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/rut_fft.jpg" alt="Image 1" style="width: 100%; border-radius: 8px;">
            <p>Rut: FFT.</p>
        </div>

        <!-- Image 2 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/kalle_fft.jpg" alt="Image 2" style="width: 100%; border-radius: 8px;">
            <p>Kalle: FFT.</p>
        </div>

        

        <!-- Image 3 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/lowpass_fft.jpg" alt="Image 3" style="width: 100%; border-radius: 8px;">
            <p>Rut Filtered (LF): FFT </p>
        </div>

        <!-- Image 4 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/highpass_fft.jpg" alt="Image 3" style="width: 100%; border-radius: 8px;">
            <p>Kalle Filtered (HF): FFT </p>
        </div>

        <!-- Image 5 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/rutkalle_fft.jpg" alt="Image 3" style="width: 100%; border-radius: 8px;">
            <p>Kallrut Hybrid Image: FFT </p>
        </div>

    </div>

    </section>
             <h2>2.3 Laplacian and Gaussian Pyramids </h2>

    <section>

        <p>
            In this part of the project we were suppsoed to create a Laplacian and a Gaussian stack/pyramid. The Gaussian pyrmaid is quite simple to create, it is just constructing a pyramid 
            with the desired amount of levels were the first level is the original image, the second level is the gaussian blurring of the first image. Then the third level is the gaussian blurring of the second level. So what we do is just blurring the image more and more
            with the last level being the most blurred, which is also the image with the lowest frequencies. 
        
        </p>

        <p>
            We then create the Laplacian pyramid using the Gaussian pyramid. This is done by just making the level of a Laplacian pyramid is equal to the the difference between the corresponding level and the next level in the Gaussian pyramid.
            For the last level in the Laplacian pyramid we just set that to be the last level of the Gaussian pyramid. Now we have created a Laplcian pyramid with each level corresponds to a certain amount of frequenceis in the image.
            I have 5 levels in my pyramids as displayed below. The first level is the highest frequencies since it is the original image minus the first blurr. Then the next three levels are like bandpass filters with decreasing frequencies. Then the last
            image in the Laplacian pyramid is just the remaining low frequencies of the original image. In order to see if my implementation was correct I just collapsed the pyramid to see if it resulted in the
            orginal image. As can be seen below the results illustrate what I just explained.
        </p>

        <p>
            These pyramids can be used to blend images, when blending the apple and the orange I wanted to blend them vertically. In order to do this I masked the images using a vertical mask.
            Then creating a gaussian pyramid of the vertical mask which I multiply with one of the gaussian pyramids for the images. For the second image I multiply the gaussian pyramid with (1- the gaussian 
            pyramid of the vertical mask). In order to get a smooth transition I made the mask to not just be a binary threshold at the middle of the image but a smooth transition from a short
            range at the left of the image center to an equally short range to the right of the image. Letting the value decrease linearly from one to zero. The laplacian pyramids
            of the halforange, halfapple and apporange are presented below.
            
        </p>


         <div style="display: block;">
        
        <!-- Image 1 -->
        <div style="padding: 10px;">
            <img src="./images2/gaussian_pyramid_apple.jpeg" alt="Image 1" style="width: 100%; border-radius: 8px;">
            <p>Gaussian Pyramid Apple.</p>
        </div>

        <!-- Image 2 -->
        <div style="padding: 10px;">
            <img src="./images2/gaussian_pyramid_orange.png" alt="Image 2" style="width: 100%; border-radius: 8px;">
            <p>Gaussian Pyramid Orange</p>
        </div>

        <!-- Image 3 -->
        <div style="padding: 10px;">
            <img src="./images2/lap_apple.jpeg" alt="Image 3" style="width: 100%; border-radius: 8px;">
            <p>Laplacian Pyramid Apple</p>
        </div>

        <!-- Image 4 -->
        <div style="padding: 10px;">
            <img src="./images2/lap_orange.jpeg" alt="Image 4" style="width: 100%; border-radius: 8px;">
            <p>Laplacian Pyramid Orange</p>
        </div>

              <!-- Image 5 -->
        <div style="padding: 10px;">
            <img src="./images2/half_apple.jpeg" alt="Image 2" style="width: 100%; border-radius: 8px;">
            <p>Laplacian Pyramid half apple</p>
        </div>

        <!-- Image 3 -->
        <div style="padding: 10px;">
            <img src="./images2/half_orange.jpeg" alt="Image 3" style="width: 100%; border-radius: 8px;">
            <p>Laplacian Pyramid half organge</p>
        </div>

        <!-- Image 4 -->
        <div style="padding: 10px;">
            <img src="./images2/lap_apporange.jpeg" alt="Image 4" style="width: 100%; border-radius: 8px;">
            <p>Laplacian Pyramid Apporange</p>
        </div>

       
        </div>
        
    </div>
        
    </section>

    <section>
        <h2> 2.4 Image Blending</h2>

        <p>
         In order to get the desired blended images which are desired I just add the masked pyramids together and then collapse the pyramid which will result in a blended image. Creating circular, box, vertical and horizontal masks is rather simple.
            But creating irregular masks I found superhard by just using code, hence I used photoshop to create my irregular masks. The results I got are presented below.   
        </p>

        <div style="padding: 10px;">
            <img src="./images2/apporange.jpg" alt="Image 4" style="width: 100%; border-radius: 8px;">
            <p> Apporange after blending apple and orange using Laplacian pyramids</p>
        </div>
        
    </section>
    <div id="countdown"></div>

<script>
// Set the date we're counting down to
const countDownDate = new Date("Nov 1, 2024 16:40:00").getTime();

// Update the count down every 1 second
const countdownFunction = setInterval(function() {

  // Get today's date and time
  const now = new Date().getTime();

  // Find the distance between now and the count down date
  const distance = countDownDate - now;

  // Time calculations for days, hours, minutes and seconds
  const days = Math.floor(distance / (1000 * 60 * 60 * 24));
  const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
  const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
  const seconds = Math.floor((distance % (1000 * 60)) / 1000);

  // Display the result in the element with id="countdown"
  document.getElementById("countdown").innerHTML = "RB i SF: " + days + "d " + hours + "h " 
  + minutes + "m " + seconds + "s ";

  // If the count down is finished, write some text
  if (distance < 0) {
    clearInterval(countdownFunction);
    document.getElementById("countdown").innerHTML = "EXPIRED";
  }
}, 1000);
</script>
     <!-- Final Remarks Section -->
    <section>
        <h2>Final Remarks</h2>
        <p>
            


        </p>
           

    </section>

        
    <!-- Footer Section -->
    <footer>
        <p>© 2024 Kalle's Portfolio | Project 1: Aligning RGB Images</p>
        <p>Contact: <a href="mailto:kj00@berkeley.edu">kj00@berkeley.edu</a></p>
    </footer>
</body>
</html>
