<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project 1: Fun with filters</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f4f4f4;
            color: #333;
        }
        header {
            text-align: center;
            margin-bottom: 50px;
        }
        h1 {
            font-size: 2.5em;
            color: #4CAF50;
        }
        h2 {
            color: #4CAF50;
        }
        p {
            font-size: 1.2em;
            line-height: 1.6em;
        }
        img {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            margin: 20px 0;
        }
        section {
            margin-bottom: 40px;
        }
        footer {
            text-align: center;
            margin-top: 50px;
            font-size: 0.8em;
            color: #777;
        }
        .screenshot {
            display: flex;
            justify-content: center;
        }
    </style>
</head>
<body>
    <header>
        <h1> Filters and Frequencies</h1>
    </header>

    <!-- Introduction Section -->
    <section>
        <h2>1.1 Finite difference operators</h2>
        <p>
            In the first part of the project the task was to find the partial derivative in x and y for an image using convolutions. In order to extract the image showing the partial derivative of the image
            in x, we convolute the one 2D image with it's corresponding finite differenece kernel Dx. Dx in this calculations is constructed as: np.array([[1, -1]]). In order to calculate
            the partial derivative of y, we do the same thing but letting the kernel which the image is convolved be: dy_kernel = np.array([[1], [-1]]). In order to not change the imagesize
            during convolution we let the mode be 'same' when using the scipy built in function convolve2D.
        </p>

        <p>
            In order to get an image showing the edges in a picture we just combine the two calculated partial derivatives.  The calculations is done by pixelwise taking 
            square root of the sum of the images squared, i.e np.sqrt(partial_x**2 + partial_y**2). After this operation, we can set a threshold for how sharp edges must be in order to be in the edgeimage.
            I found the when binarizing, letting the threshold be 0.3 was most suitable. The results are presented below.
        </p>

    </section>

<!-- TIF Image Before Processing Section -->
<section>
    <h2>TIF Images Before and After Processing</h2>
    
    <!-- First row of images -->
    <div class="screenshot" style="display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap;">
        <!-- First image: Camerman before processing -->
        <div style="flex: 1; padding: 10px; min-width: 48%;">
            <img src="./images2/cameraman.png" alt="Image before processing " style="max-width: 100%; border-radius: 8px;">
            <p>The image above shows the original image before processing.</p>
        </div>

        <!-- Second image: Original image for comparison -->
        <div style="flex: 1; padding: 10px; min-width: 48%;">
            <img src="./images2/edge_pic_camerman.jpeg" alt="Gradient Magnitude" style="max-width: 100%; border-radius: 8px;">
            <p>The image above is the edgeimage gotten from the combination of the partial derivatives in x and y.</p>
        </div>
    </div>
    
    <!-- Second row of images -->
    <div class="screenshot" style="display: flex; justify-content: space-between; align-items: flex-start; flex-wrap: wrap;">
        <!-- Third image: Aligned image -->
        <div style="flex: 1; padding: 10px; min-width: 48%;">
            <img src="./images2/partial_x_cameraman.jpeg" alt="Image after alignment" style="max-width: 100%; border-radius: 8px;">
            <p>The image above shows the partial derivative of the original image in x direction.</p>
        </div>

        <!-- Fourth image: Final image after enhancement -->
        <div style="flex: 1; padding: 10px; min-width: 48%;">
            <img src="./images2/partial_y_cameraman.jpeg" alt="Final processed image" style="max-width: 100%; border-radius: 8px;">
            <p>The image above shows the  partial derivative of the orginal iamage in y direction.</p>
        </div>
    </div>
</section>



    <!-- 1.2 Section -->
    <section>
        <h2> 1.2 Using gaussian blurring to improve edgeimages</h2>
        <p>
            For the first part of task 1.2 we do the same operations as we did in task 1.1. But before taking the partial derivative we first blurr the image using a gaussian kernel. For this image I choose to 
            use a kernelsize of 11 and a sigma of 1.5 which I convolved with the original image in order to blurr the picture. 
           
    </p>

      


       <section>
  <!-- Section for Displaying Images -->
<section>
    <h2>Gallery of Images for 1.2</h2>

    <!-- Flex Container for Images -->
    <div style="display: flex; flex-wrap: wrap; justify-content: space-between; align-items: flex-start;">

        <!-- Row 1 -->
        <div style="flex: 1 1 48%; padding: 10px;">
            <img src="./images2/dog_x.jpeg" alt="Image 1" style="width: 100%; border-radius: 8px;">
            <p>DoG Filter in X.</p>
        </div>
        <div style="flex: 1 1 48%; padding: 10px;">
            <img src="./images2/dog_y.jpeg" alt="Image 2" style="width: 100%; border-radius: 8px;">
            <p>DoG Filter in Y.</p>
        </div>

        <!-- Row 2 -->
        <div style="flex: 1 1 48%; padding: 10px;">
            <img src="./images2/blurred_partial_x.jpeg" alt="Image 3" style="width: 100%; border-radius: 8px;">
            <p> Convolving Image with Gaussian and the Finite difference kernel for x.</p>
        </div>
        <div style="flex: 1 1 48%; padding: 10px;">
            <img src="./images2/blurred_partial_x.jpeg" alt="Image 4" style="width: 100%; border-radius: 8px;">
            <p>Convolving Gaussian with Finite Difference and then with image for x</p>
        </div>

        <!-- Row 3 -->
        <div style="flex: 1 1 48%; padding: 10px;">
            <img src="./images2/blurred_partial_y.jpeg" alt="Image 5" style="width: 100%; border-radius: 8px;">
            <p>Convolving Image with Gaussian and the Finite difference kernel for y.</p>
        </div>
        <div style="flex: 1 1 48%; padding: 10px;">
            <img src="./images2/blurred_partial_y.jpeg" alt="Image 6" style="width: 100%; border-radius: 8px;">
            <p>Convolving Gaussian with Finite Difference and then with image for y .</p>
        </div>

        <!-- Row 4 -->
        <div style="flex: 1 1 48%; padding: 10px;">
            <img src="./images2/gaussian_edge_camerman.jpeg" alt="Image 7" style="width: 100%; border-radius: 8px;">
            <p>Edgeimage after blurring 7.</p>
        </div>
        <div style="flex: 1 1 48%; padding: 10px;">
            <img src="./images2/conv_gaussain_camerman.jpeg" alt="Image 8" style="width: 100%; border-radius: 8px;">
            <p>Edgeimage using DoG filters</p>
        </div>

    </div>
</section>

             <!-- 2.1 Section -->
    <section>
        <h2> 2.1 Image Sharpening</h2>
        <p>
            Now it is time to sharpen images instead of blurring them. However in order to sharpen the images we do in fact blurr them first. The process fo sharpening an image is quite simple
            First you create a gaussian with an appropriate size and sigma value, for this task I varied it based on the images spatial resolution. Then you blurr your image and subtract the blurred part form 
            the original image. Then you add the difference the desired amount of times, which we call the alpha factor, to the original image based on how much you want to sharpen it. I did 
           
    </p>

      
<div style="display: flex; justify-content: space-between; align-items: flex-start;">
        
        <!-- Image 1 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/taj.jpg" alt="Image 1" style="width: 100%; border-radius: 8px;">
            <p>Original image.</p>
        </div>

        <!-- Image 2 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/taj_alpha2.jpg" alt="Image 2" style="width: 100%; border-radius: 8px;">
            <p>Taj with alpha = 2.</p>
        </div>

        <!-- Image 3 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/taj_alpha4.jpg" alt="Image 3" style="width: 100%; border-radius: 8px;">
            <p>Taj with alpha = 4.</p>
        </div>

        <!-- Image 4 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/taj_alpha6.jpg" alt="Image 4" style="width: 100%; border-radius: 8px;">
            <p>Taj with alpha = 6.</p>
        </div>
    </div>


        <p>
            Now I took a high quality picture of me and my family and blurred it to the resharpen the image and see the results. 
        </p>

         <div style="display: flex; justify-content: space-between; align-items: flex-start;">
        
        <!-- Image 1 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/3gens.jpg" alt="Image 1" style="width: 100%; border-radius: 8px;">
            <p>Original Image.</p>
        </div>

        <!-- Image 2 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/3gens_blurr.jpg" alt="Image 2" style="width: 100%; border-radius: 8px;">
            <p>Gaussian Blurr.</p>
        </div>

        <!-- Image 3 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/3gens_blurr_alpha1.jpg" alt="Image 3" style="width: 100%; border-radius: 8px;">
            <p>Sharpened iamge with alpha = 1.</p>
        </div>

        <!-- Image 4 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/3gens_blurr_alpha3.jpg" alt="Image 4" style="width: 100%; border-radius: 8px;">
            <p>Sharpened iamge with alpha = 3.</p>
        </div>

        <!-- Image 5 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/3gens_blurr_alpha5.jpg" alt="Image 5" style="width: 100%; border-radius: 8px;">
            <p>Sharpened iamge with alpha = 5.</p>
        </div>
    </div>

        <p>
            As we can see in the above images, the original image is better looking than the sharpened ones after blurring. This is due to the fact that when we do the gaussian blurr
            we average from pixels and therefor loose informaton which the original image included, this information can not be regained again, unless of course we would use some sort of Machine Learning tool.
        </p>
       <section>

        
       
    <section>
        <h2>2.2 Hybrid Images</h2>
        <p>
            In this part we were supposed to create hybrid images which is seen as two different images when looked at far away or up close. If you do not want to walk away from the computer to see the 
            far away image you can just squint your eyes. The theory behind creating these images is take two images and add them together. But jsut doing that will give a really messy result. Instead
            we use our knowledge of frequencies to create these images. We take our 2 images and let one of them pass thorugh a highpass filter and the other one passs through a lowpass filter and then add them upp together.
            However instead of fourier transforming and then removing low and high frequencies of the images, we instead blurred the image which created the low frequency iamge. For the high
            frequency image we just subtracted its respective lowpass image to isolate the high frequencies from the image. Very simple, then by just adding them up we get our hybrid images. I did lttle extra twist here 
            and increased the weight of the high frequency image by some to really make it pop when looking at the image up close, I think gave more exciting results.
        </p>
<div style="display: flex; justify-content: space-between; align-items: flex-start;">
        <!-- Image 1 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/DerekPicture.jpg" alt="Image 1" style="width: 100%; border-radius: 8px;">
            <p>Derek: Low Frecuency Image.</p>
        </div>

        <!-- Image 2 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/nutmeg.jpg" alt="Image 2" style="width: 100%; border-radius: 8px;">
            <p>Nutmeg: High Frecuency Image.</p>
        </div>

        <!-- Image 3 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/catrek.jpg" alt="Image 3" style="width: 100%; border-radius: 8px;">
            <p>Catrek: Hybrid Image.</p>
        </div>

    </div>
    <div style="display: flex; justify-content: space-between; align-items: flex-start;">
        <!-- Image 1 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/rut1.jpg" alt="Image 1" style="width: 100%; border-radius: 8px;">
            <p>Rut: Low Frecuency Image.</p>
        </div>

        <!-- Image 2 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/kale1.jpg" alt="Image 2" style="width: 100%; border-radius: 8px;">
            <p>Kalle: High Frecuency Image.</p>
        </div>

        <!-- Image 3 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/rutkalle_final.jpg" alt="Image 3" style="width: 100%; border-radius: 8px;">
            <p>Kallrut: Hybrid Image both colorized.</p>
        </div>

        <!-- Image 3 -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images2/rutkalle_grayrgb.jpg" alt="Image 3" style="width: 100%; border-radius: 8px;">
            <p>Kallrut: Hybrid Image LF grayscale and HF RGB</p>
        </div>

    </div>

    </section>

        <section>
    <h2>TIF Image after contrast enhancement</h2>
    <div class="screenshot" style="display: flex; justify-content: space-between; align-items: center;">
        <!-- Insert first image after processing -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images/rgb_church_final1.jpg" alt="Image after alignment and processing" style="max-width: 100%;">
        </div>
        
        <!-- Insert second image pre contrast enhancement -->
        <div style="flex: 1; padding: 10px;">
            <img src="./images/rgb_church.jpg" alt="Aligned chruch" style="max-width: 100%;">
        </div>
    </div>
    
    <p>
        The images above show the processed image after applying the CLAHE contrast enhancement algorithm and the automatic edgecrop (left) and the stacked image without processing(right). Notice how the contrast is increased and some of the edges surrounding the pictures have disapeared. 
        The reason some are left is due to the fact that there is still part of the image "hiding" under the edges and the variance is high enough for it to be still in the picture as well as the number in the top right corner which is still part of the edge but making the columns have a high enough variance
        to not get cropped. However I think this is good since this part is valuable information for the image. But we can see that the pink edge at the top as well as the bottom edge is removed since it contributes no information about the picture which is a good removal. I wanted to keep all parameters constant hence 
        some images show more edges than others after the automatic cropping due to the large difference in variance between images and the edges being rather constant.
    
    </p>
</section>

    </section>

    <section>
    <h2>Results (Displacement is in amount of pixels (x,y) )</h2>
    <div class="results" style="display: flex; flex-wrap: wrap; justify-content: space-between;">
        <!-- Image 1 -->
        <div style="flex: 0 0 30%; margin-bottom: 20px; text-align: center;">
            <h3>Result 1: Train</h3>
            <img src="./images/rgb_train_final1.jpg" alt="Result 1" style="width: 100%; border-radius: 8px;">
            <p>R:(32, 85), G:(7, 42)</p>
            <p>Alignment function: Standard Pyramid </p>
        </div>

        <!-- Image 2 -->
        <div style="flex: 0 0 30%; margin-bottom: 20px; text-align: center;">
            <h3>Result 2: Church </h3>
            <img src="./images/rgb_church_final1.jpg" alt="Result 2" style="width: 100%; border-radius: 8px;">
            <p>R:(-4, 58), G:(4, 25)</p>
            <p>Alignment function: Standard Pyramid</p>
        </div>

        <!-- Image 3 -->
        <div style="flex: 0 0 30%; margin-bottom: 20px; text-align: center;">
            <h3>Result 3: Sculpture</h3>
            <img src="./images/rgb_sculpture_final1.jpg" alt="Result 3" style="width: 100%; border-radius: 8px;">
            <p>R:(-27, 140), G:(-11, 33)</p>
            <p>Alignment function: Standard Pyramid</p>
        </div>

        <!-- Row 2 -->

        <!-- Image 4 -->
        <div style="flex: 0 0 30%; margin-bottom: 20px; text-align: center;">
            <h3>Result 4: Harvesters</h3>
            <img src="./images/rgb_harvester_final1.jpg" alt="Result 4" style="width: 100%; border-radius: 8px;">
            <p>R:(15, 123), G:(18, 51)</p>
            <p>Alignment function: Edge Pyramid</p>
        </div>

        <!-- Image 5 -->
        <div style="flex: 0 0 30%; margin-bottom: 20px; text-align: center;">
            <h3>Result 5: Emir </h3>
            <img src="./images/rgb_emir_final1.jpg" alt="Result 5" style="width: 100%; border-radius: 8px;">
            <p>R:(36, 96), G:(21, 42)</p>
            <p>Alignment function: Edge Pyramid</p>
        </div>

        <!-- Image 6 -->
        <div style="flex: 0 0 30%; margin-bottom: 20px; text-align: center;">
            <h3>Result 6: Tobolsk </h3>
            <img src="./images/rgb_tobolsk_final1.jpg" alt="Result 6" style="width: 100%; border-radius: 8px;">
            <p>R:(3, 7), G:(3, 3)</p>
            <p>Alignment function: JPG Align</p>
        </div>

        <!-- Row 3 -->

        <!-- Image 7 -->
        <div style="flex: 0 0 30%; margin-bottom: 20px; text-align: center;">
            <h3>Result 7: Cathedral</h3>
            <img src="./images/rgb_cathedral_final1.jpg" alt="Result 7" style="width: 100%; border-radius: 8px;">
            <p>R:(3, 12), G:(2, 5)</p>
            <p>Alignment function: JPG Align</p>
        </div>

        <!-- Image 8 -->
        <div style="flex: 0 0 30%; margin-bottom: 20px; text-align: center;">
            <h3>Result 8: Icon</h3>
            <img src="./images/rgb_icon_final1.jpg" alt="Result 8" style="width: 100%; border-radius: 8px;">
            <p>R:(23, 87), G:(18, 41)</p>
            <p>Alignment function: Standard Pyramid</p>
        </div>

        <!-- Image 9 -->
        <div style="flex: 0 0 30%; margin-bottom: 20px; text-align: center;">
            <h3>Result 9: Onion Church</h3>
            <img src="./images/rgb_onion_church_final1.jpg" alt="Result 9" style="width: 100%; border-radius: 8px;">
            <p>R:(37, 105), G:(26, 50)</p>
            <p>Alignment function: Standard Pyramid</p>
        </div>

        <!-- Row 4 -->

        <!-- Image 10 -->
        <div style="flex: 0 0 30%; margin-bottom: 20px; text-align: center;">
            <h3>Result 10: Lady </h3>
            <img src="./images/rgb_lady_final1.jpg" alt="Result 10" style="width: 100%; border-radius: 8px;">
            <p>R:(14, 114), G:(8, 51)</p>
            <p>Alignment function: Standard Pyramid</p>
        </div>

        <!-- Image 11 -->
        <div style="flex: 0 0 30%; margin-bottom: 20px; text-align: center;">
            <h3>Result 11: Self Portrait</h3>
            <img src="./images/rgb_selft_portrait_final1.jpg" alt="Result 11" style="width: 100%; border-radius: 8px;">
            <p>R:(37, 175), G:(29, 77)</p>
            <p>Alignment function: Standard Pyramid</p>
        </div>

        <!-- Image 12 -->
        <div style="flex: 0 0 30%; margin-bottom: 20px; text-align: center;">
            <h3>Result 12: Three Generations</h3>
            <img src="./images/rgb_three_generations_final1.jpg" alt="Result 12" style="width: 100%; border-radius: 8px;">
            <p>R:(12, 108), G:(15, 51)</p>
            <p>Alignment function: Standard Pyramid</p>
        </div>
    </div>
</section>

    <div id="countdown"></div>

<script>
// Set the date we're counting down to
const countDownDate = new Date("Nov 1, 2024 16:40:00").getTime();

// Update the count down every 1 second
const countdownFunction = setInterval(function() {

  // Get today's date and time
  const now = new Date().getTime();

  // Find the distance between now and the count down date
  const distance = countDownDate - now;

  // Time calculations for days, hours, minutes and seconds
  const days = Math.floor(distance / (1000 * 60 * 60 * 24));
  const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
  const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
  const seconds = Math.floor((distance % (1000 * 60)) / 1000);

  // Display the result in the element with id="countdown"
  document.getElementById("countdown").innerHTML = "RB i SF: " + days + "d " + hours + "h " 
  + minutes + "m " + seconds + "s ";

  // If the count down is finished, write some text
  if (distance < 0) {
    clearInterval(countdownFunction);
    document.getElementById("countdown").innerHTML = "EXPIRED";
  }
}, 1000);
</script>
     <!-- Final Remarks Section -->
    <section>
        <h2>Final Remarks</h2>
        <p>
            I have never made a website before so I took some help from ChatGPT with the HTML code for presenting my images next to each other, oterwise it was pretty straight forward, kind of similar to latex. Otherwise everythig is done by myself and using the course literature. 
            A very intersting first project and I had a lot of fun doing it but also a little bit frustrating. Hope you enjoyed the reading and the images.


        </p>
           

    </section>

        
    <!-- Footer Section -->
    <footer>
        <p>© 2024 Kalle's Portfolio | Project 1: Aligning RGB Images</p>
        <p>Contact: <a href="mailto:kj00@berkeley.edu">kj00@berkeley.edu</a></p>
    </footer>
</body>
</html>
